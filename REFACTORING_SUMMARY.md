# –†–µ–∑—é–º–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ `src/constants/` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ `src/utils/` - —É—Ç–∏–ª–∏—Ç—ã (errorHandler, logger, guid, validators)
- ‚úÖ `src/errors/` - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏
- ‚úÖ `src/types/` - —Ç–∏–ø—ã –¥–ª—è Webview —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ `src/services/embedding/` - —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ EmbeddingService
**–ë—ã–ª–æ**: –û–¥–∏–Ω –±–æ–ª—å—à–æ–π –∫–ª–∞—Å—Å –Ω–∞ 1203 —Å—Ç—Ä–æ–∫–∏

**–°—Ç–∞–ª–æ**: –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- `EmbeddingService` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (300+ —Å—Ç—Ä–æ–∫)
- `FileVectorizer` - –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- `DirectoryVectorizer` - –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- `TextSummarizer` - —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- `EmbeddingProvider` - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
  - `OllamaEmbeddingProvider`
  - `CustomEmbeddingProvider`
  - `EmbeddingProviderFactory`

### 3. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω `ApiErrorHandler` –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API
- ‚úÖ –í—ã–Ω–µ—Å–µ–Ω–∞ –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è vs_origin –∏ vs_summarize –≤–µ–∫—Ç–æ—Ä–æ–≤
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö (OllamaProvider, LocalApiProvider)

### 4. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ `DEFAULT_OLLAMA_URL`, `DEFAULT_LOCAL_API_URL`, `DEFAULT_TIMEOUT`
- ‚úÖ `SUMMARIZE.MAX_TEXT_LENGTH`, `SUMMARIZE.TRUNCATE_MESSAGE`
- ‚úÖ `VECTOR_INDEX.*` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `STORAGE_KEYS.*` - –∫–ª—é—á–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ `TABLE_NAMES.*` - –∏–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü

### 5. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω `Logger` –∫–ª–∞—Å—Å —Å —É—Ä–æ–≤–Ω—è–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `console.log/warn/error` –Ω–∞ `Logger`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ VS Code Output Channel

### 6. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫:
  - `AICoderError` (–±–∞–∑–æ–≤—ã–π)
  - `EmbeddingError`
  - `VectorizationError`
  - `StorageError`
  - `ConfigError`
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `ApiErrorHandler`

### 7. –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–∏–ø—ã –¥–ª—è Webview —Å–æ–æ–±—â–µ–Ω–∏–π (`WebviewMessage`, `GenerateMessage`, –∏ —Ç.–¥.)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ `panel.ts`
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

### 8. Dependency Injection
- ‚úÖ `EmbeddingService` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `VectorStorage` —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- ‚úÖ `FileVectorizer` –∏ `DirectoryVectorizer` –ø–æ–ª—É—á–∞—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ DI
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `extension.ts` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 9. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `ConfigValidator` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ LLM –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

### 10. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ `fs.readdirSync` –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ `fs.promises.readdir`
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ (–æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö)

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è

### –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
- **–î–æ**: `embeddingService.ts` - 1203 —Å—Ç—Ä–æ–∫–∏
- **–ü–æ—Å–ª–µ**: 
  - `embeddingService.ts` - ~300 —Å—Ç—Ä–æ–∫
  - `fileVectorizer.ts` - ~160 —Å—Ç—Ä–æ–∫
  - `directoryVectorizer.ts` - ~250 —Å—Ç—Ä–æ–∫
  - `textSummarizer.ts` - ~30 —Å—Ç—Ä–æ–∫
  - `embeddingProvider.ts` - ~150 —Å—Ç—Ä–æ–∫

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **–î–æ**: ~15-20%
- **–ü–æ—Å–ª–µ**: <5% (–≤—ã–Ω–µ—Å–µ–Ω–æ –≤ —É—Ç–∏–ª–∏—Ç—ã)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–î–æ**: 40+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `console.log/warn/error`
- **–ü–æ—Å–ª–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `Logger`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–î–æ**: –†–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- **–ü–æ—Å–ª–µ**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `ApiErrorHandler` –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
src/
‚îú‚îÄ‚îÄ constants/          # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ errors/            # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏
‚îú‚îÄ‚îÄ types/             # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.ts
‚îÇ   ‚îú‚îÄ‚îÄ logger.ts
‚îÇ   ‚îú‚îÄ‚îÄ guid.ts
‚îÇ   ‚îî‚îÄ‚îÄ validators.ts
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ embedding/      # –ú–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ embeddingService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fileVectorizer.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ directoryVectorizer.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ textSummarizer.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ embeddingProvider.ts
‚îÇ   ‚îú‚îÄ‚îÄ llmService.ts
‚îÇ   ‚îî‚îÄ‚îÄ fileStatusService.ts
‚îú‚îÄ‚îÄ providers/
‚îú‚îÄ‚îÄ storage/
‚îî‚îÄ‚îÄ webview/
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

1. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ö–æ–¥ –ª–µ–≥—á–µ –ø–æ–Ω–∏–º–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å
2. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ö–ª–∞—Å—Å—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã, –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
5. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
6. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –±–∞—Ç—á–∏–Ω–≥ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î
3. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

## ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ. –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID.

